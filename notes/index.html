<!DOCTYPE html>
<html lang="en">
<title>Notes - The stuff I do</title>

<meta name="description" content="A personal blog where I write about my side projects">
<meta name="robots" content="index,follow">
<meta name="author" content="statox">

<link rel="canonical" href="https://www.statox.fr/notes/">

<meta property="og:title" content="Notes - The stuff I do">
<meta property="og:type" content="article">

<meta property="og:url" content="https://www.statox.fr/notes/">
<meta property="og:description" content="A personal blog where I write about my side projects">


<meta name="twitter:card" content="summary">

<meta name="twitter:url" content="https://www.statox.fr/notes/">
<meta name="twitter:title" content="Notes - The stuff I do">
<meta name="twitter:description" content="A personal blog where I write about my side projects">



<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Notes</title>
    <meta name="description" content="A personal blog where I write about my side projects">
    <meta name="keywords" content="statox blog">
    <meta property="og:title" content="The stuff I do">
    <meta property="og:url" content="https://www.statox.fr">
    <meta property="og:description" content="A personal blog where I write about my side projects">
    <meta property="og:type" content="website">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

    
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.20.0/themes/prism-tomorrow.css">

    
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/material.css">
    <link rel="stylesheet" href="/css/minesweeper.css">
    <link rel="stylesheet" href="/css/boids.css">
    <link rel="stylesheet" href="/css/comments.css">
    

    
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
</head>
<body>
    <header>
        <h1>The stuff I do</h1>
        <nav>
            <a href="/">Home</a> /
            <a href="/notes/">Notes</a> /
            <a href="/about/">About</a> /
            <a href="/social/">Social</a> /
            <a href="/feed.xml">RSS</a>
        </nav>
    </header>

    

    <div class="content-container">
        <div>
        <details>
            <summary>
                <a class="note-link" href=/notes/bash-arrays/>Bash arrays</a>
                <span class="note-tags">[bash][array]</span>
            </summary>
            
            <h3>Initiate an array</h3>
<pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">myArray</span><span class="token operator">=</span><span class="token punctuation">(</span> element_1 element_2 element_n <span class="token punctuation">)</span><br><span class="token assign-left variable">myArray2</span><span class="token operator">=</span><span class="token punctuation">(</span><br>    element_1<br>    element_2<br>    element_n<br><span class="token punctuation">)</span></code></pre>
<h3>Access item by index</h3>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token variable">${myArray<span class="token punctuation">[</span>2<span class="token punctuation">]</span>}</span></code></pre>
<h3>Iterate through array</h3>
<p>To iterate over the elements:</p>
<pre class="language-bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">element</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">${array<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>"</span><br><span class="token keyword">do</span><br>    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$element</span>"</span><br><span class="token keyword">done</span></code></pre>
<p>To get both the index and the value:</p>
<pre class="language-bash"><code class="language-bash"><span class="token keyword">for</span> <span class="token for-or-select variable">index</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">${<span class="token operator">!</span>array<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span>"</span><br><span class="token keyword">do</span><br>    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$index</span> <span class="token variable">${array<span class="token punctuation">[</span>index<span class="token punctuation">]</span>}</span>"</span><br><span class="token keyword">done</span></code></pre>

        </details>
    </div><div>
        <details>
            <summary>
                <a class="note-link" href=/notes/zsh-completion-function/>Creating zsh completion function</a>
                <span class="note-tags">[shell][zsh]</span>
            </summary>
            
            <p>A quick trick to have custom completion on the aliases I create.</p>
<p>First create the function and the alias, they can be in <code>~/.bash_aliases</code> or whatever.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function-name function">myCoolFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token builtin class-name">echo</span> <span class="token string">"Here are the args from my function <span class="token variable">$@</span>"</span><br><span class="token punctuation">}</span><br><span class="token builtin class-name">alias</span> <span class="token assign-left variable">mcf</span><span class="token operator">=</span><span class="token string">'myCoolFunction'</span></code></pre>
<p>Then create the completion function (best practice <code>underscore+function name</code>) which can be anywhere too. An interesting list of the helpers provided by zsh for the completion functions is <a href="https://github.com/zsh-users/zsh-completions/blob/master/zsh-completions-howto.org" target="_blank" rel="noopener noreferrer">here</a>.</p>
<pre class="language-bash"><code class="language-bash"><span class="token function-name function">_myCoolFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    compadd <span class="token string">"<span class="token variable">$@</span>"</span> foo bar baz<br><span class="token punctuation">}</span></code></pre>
<p>Finally <em>in <code>~/.zshrc</code></em> we can register <code>_myCoolFunction</code> as the completion function of <code>myCoolFunction</code>:</p>
<pre class="language-bash"><code class="language-bash">compdef _myCoolFunction myCoolFunction</code></pre>
<p>Once everything is ready in a new shell typing <code>mcf &lt;TAB&gt;</code> should yield the 3 completions options.</p>
<p>If things don't work one can check the completion function for a particular function <em>(It does not work with the alias)</em> with:</p>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token variable">$_comps</span><span class="token punctuation">[</span>myCoolFunction<span class="token punctuation">]</span></code></pre>
<p>and the implementation with</p>
<pre class="language-bash"><code class="language-bash">functions <span class="token variable">$_comps</span><span class="token punctuation">[</span>myCoolFunction<span class="token punctuation">]</span></code></pre>
<p>Finally I should check how to make it work with the defined files (<code>~/.oh-my-zsh/completions</code>) and understand why the <code>compdef</code> command only works when put in <code>.zshrc</code>.</p>

        </details>
    </div><div>
        <details>
            <summary>
                <a class="note-link" href=/notes/git-commits/>Fixing commits in git</a>
                <span class="note-tags">[git][commit]</span>
            </summary>
            
            <p>This link is dope <a href="https://sethrobertson.github.io/GitFixUm/fixup.html" target="_blank" rel="noopener noreferrer">https://sethrobertson.github.io/GitFixUm/fixup.html</a></p>
<p>TODO: Extract the ones I need but can never remember</p>
<h3>Remove commit from history</h3>
<p><em>Reminder on zsh escape <code>^</code> in <code>HEAD^</code> with <code>HEAD\^</code></em></p>
<p>Remove the last commit of the history completely <strong>and discard changes</strong></p>
<pre><code>git reset --hard HEAD^
</code></pre>
<p>Remove the last commit from history but keep the working tree</p>
<pre><code>git reset HEAD^
</code></pre>
<h3>Sign an older commit in your branch</h3>
<p>This will do an interactive rebase, playing <code>git commit --amend --no-edit -n -S</code><br>
after each commit</p>
<p><em>(Check if <code>-n</code> is useful I can't find it in the man)</em></p>
<pre><code>git rebase --exec 'git commit --amend --no-edit -n -S' -i my-branch
</code></pre>

        </details>
    </div><div>
        <details>
            <summary>
                <a class="note-link" href=/notes/grep/>Grep</a>
                <span class="note-tags">[bash][grep]</span>
            </summary>
            
            <h3>Exclude multiple directories</h3>
<pre class="language-bash"><code class="language-bash"><span class="token function">grep</span> --exclude-dir<span class="token operator">=</span><span class="token punctuation">{</span>node_modules,src<span class="token punctuation">}</span></code></pre>

        </details>
    </div><div>
        <details>
            <summary>
                <a class="note-link" href=/notes/scp/>Scp</a>
                <span class="note-tags">[bash][scp]</span>
            </summary>
            
            <p>Basically the same syntax as <code>cp</code> (i.e. <code>scp [source] [dest]</code>)</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Local to remote</span><br><span class="token function">scp</span> ./local/path user@remote-host:/home/user<br><br><span class="token comment"># Remote to local</span><br><span class="token function">scp</span> user@remote-host:/home/user ./local/path </code></pre>
<h3>Useful options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-r</code></td>
<td>Copy directories</td>
</tr>
<tr>
<td><code>-i</code></td>
<td>Provide identity file</td>
</tr>
<tr>
<td><code>-P</code></td>
<td>Specify port</td>
</tr>
</tbody>
</table>

        </details>
    </div><div>
        <details>
            <summary>
                <a class="note-link" href=/notes/screen/>Screen</a>
                <span class="note-tags">[screen]</span>
            </summary>
            
            <h3>Basic usage</h3>
<table>
<thead>
<tr>
<th>Description</th>
<th>Command</th>
</tr>
</thead>
<tbody>
<tr>
<td>Start a new session with session name</td>
<td><code>screen -S &lt;session_name&gt;</code></td>
</tr>
<tr>
<td>List running sessions / screens</td>
<td><code>screen -ls</code></td>
</tr>
<tr>
<td>Attach to a running session</td>
<td><code>screen -x</code></td>
</tr>
<tr>
<td>Attach to a running session with name</td>
<td><code>screen -r &lt;session_name&gt;</code></td>
</tr>
<tr>
<td>Detach a running session</td>
<td><code>screen -d &lt;session_name&gt;</code></td>
</tr>
</tbody>
</table>

        </details>
    </div><div>
        <details>
            <summary>
                <a class="note-link" href=/notes/shell-redirection/>Shell redirections</a>
                <span class="note-tags">[bash][shell][output]</span>
            </summary>
            
            <h3>Redirect stdout and stderr to a file</h3>
<pre class="language-bash"><code class="language-bash"><span class="token builtin class-name">command</span> <span class="token operator">></span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span></code></pre>

        </details>
    </div>
    </div>

    <script data-goatcounter="https://statoxblog.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    <script async defer src="https://api.newcss.net/latest.js"></script>
    <noscript><img src="https://api.newcss.net/noscript.gif" alt=""></noscript>
</body>
</html>
