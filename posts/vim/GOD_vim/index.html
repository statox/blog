<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>The stuff I do</title>
    <meta name="description" content="A personal blog where I write about my side projects">
    <meta name="keywords" content="statox blog">
    <meta property="og:title" content="The stuff I do">
    <meta property="og:url" content="https://www.statox.fr">
    <meta property="og:description" content="A personal blog where I write about my side projects">
    <meta property="og:type" content="website">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

    
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css">

    
    <link rel="stylesheet" href="/css/index.css">

</head>
<body>
    <header>
        <h1>The stuff I do</h1>
        <nav>
            <a href="/">Home</a> /
            <a href="/notes/">Notes</a> /
            <a href="/about/">About</a> /
            <a href="/social/">Social</a> /
            <a href="/feed.xml">RSS</a>
        </nav>
    </header>

    <div class="content-container">
        
<h2>GOD.vim - The easiest way to quote Vim&#39;s help</h2>

<h3>I love to Quote the doc</h3>
<p>I often participate on the <a href="https://vi.stackexchange.com" target="_blank" rel="noopener noreferrer">vi.stackexchange</a> website because this community really helped me to get going with Vim when I first started using it and because it feels great to be able to help new vimmers.</p>
<p>When I write an answer I always try to think about how I can not only help the user to achieve what they want to do, but more importantly how I can help them to answer their own question next time they have one. And the best way to do that is to help them getting comfortable with the help.</p>
<p>Indeed Vim has an amazing built-in help system accessible directly from the editor itself using the command <code>:h</code>. So whenever I write my answers I do my best to add these help topics. And I also like to add a link to one of the several online version of the help</p>
<ul>
<li><a href="http://vimdoc.sourceforge.net/" target="_blank" rel="noopener noreferrer">http://vimdoc.sourceforge.net/</a> That I used at first but the anchoring of the topics were not always deterministic so it was to practical to use.</li>
<li><a href="https://vimhelp.org/" target="_blank" rel="noopener noreferrer">https://vimhelp.org/</a> Which I currently use.</li>
<li>And even <a href="https://neovim.io/doc" target="_blank" rel="noopener noreferrer">https://neovim.io/doc</a> for neovim users.</li>
</ul>
<h3>But it's painful</h3>
<p>For a long time I just wrote the help command like <code>:h autocmd-events</code> in my answers but this was not convenient:</p>
<ul>
<li>First I have to do my own research, like any vimmer would do.</li>
<li>Then I'd have to copy the help topic to my clipboard</li>
<li>In the web interface I have to type my redundant <code>:h </code> and add the help topic.</li>
<li>Then because I think new users are more inclined to read the doc if it is available under their mouth I look for the topic on an online version of the help</li>
<li>Finally I can update my markdown with the right link</li>
</ul>
<p>After doing that for a few months and feeling the pain I started creating a short hack in my <code>.vimrc</code> to improve this workflow, until the day I read <a href="https://vi.stackexchange.com/q/4346/1841" target="_blank" rel="noopener noreferrer">How can I quickly convert a Vim help tag to a vimhelp.appspot.com link?</a>. This question confirmed that this action was a pain point for other people and that pushed me to create a proper plugin.</p>
<h3>So let's create a plugin!</h3>
<p>So I created <a href="https://github.com/statox/GOD.vim" target="_blank" rel="noopener noreferrer">GOD.vim</a> this is a very simple plugin which goal is to easily get a markdown expression describing a help topic and linking to its online version. The plugin does the following:</p>
<ul>
<li>Create a new command <code>:GOD</code> which takes the exact same parameter as <code>:h</code>. The behavior is completely duplicated thanks to <a href="http://vimhelp.appspot.com/map.txt.html#%3Acommand-nargs" target="_blank" rel="noopener noreferrer"><code>:h :command-nargs</code></a> and <a href="http://vimhelp.appspot.com/map.txt.html#%3Acommand-complete" target="_blank" rel="noopener noreferrer"><code>:h :command-complete</code></a>, see <a href="https://github.com/statox/GOD.vim/blob/bed2a6fe9458284760d6fb5f08495e6579ce69dd/plugin/GOD.vim#L16" target="_blank" rel="noopener noreferrer">how I create the command</a></li>
<li>On the help page, parse the help topics and get the first one and use that to build a URL to the relevant help website.</li>
<li>Use this URL to generate a markdown template</li>
<li>Copy this template to the clipboard.</li>
</ul>
<p>I also added some additional features:</p>
<ul>
<li>Being able to link either to the vim help or the neovim help using respectively <code>:GOD</code> and <code>:NGOD</code></li>
<li>Being able to have a nicely formatted markdown list if several help topics are given as parameters to the command.</li>
</ul>
<p>I think the most part about writing this plugin was to create a pure vimscript encoding function to handle the URLs with the help of great developers from the <a href="https://vi.stackexchange.com" target="_blank" rel="noopener noreferrer">vi.stackexchange</a> community, namely <a href="https://github.com/LucHermitte" target="_blank" rel="noopener noreferrer">Luc Hermitte</a> and <a href="https://www.arp242.net/" target="_blank" rel="noopener noreferrer">Martin Tournoij</a></p>
<p>And of course it is always a great satisfaction to create a tool that you still continue to use several years after you first needed it. The sources of the plugin and its documentation are <a href="https://github.com/statox/GOD.vim" target="_blank" rel="noopener noreferrer">on Github</a></p>


<p><a href="/">← Posts</a></p>

<hr>
<comments>
    <h3>Comments</h3>
    <a class="add-comment" href="https://github.com/statox/blog-comments/issues/2#new_comment_field"  target="_blank" rel="noopener noreferrer">
        <button>Comment on Github</button>
    </a>
    <br>
</comments>

<script type="text/javascript">


function domReady(fn) {
    document.addEventListener('DOMContentLoaded', fn);
    if (document.readyState === 'interactive' || document.readyState === 'complete') {
        fn();
    }
}

async function getComments(url = '') {
    const response = await fetch(url, {
        method: 'GET',
        mode: 'cors',
        cache: 'no-cache',
        headers: { Accept: 'application/vnd.github.v3.html+json' },
    });
    return response.json();
}

domReady(() => {
    const apiUrl = 'https://api.github.com/repos/statox/blog-comments/issues/2/comments';
    const appendComments = function (comments) {
        const commentSection = document.querySelector('comments');
        if (!comments || !comments.forEach || comments.length === 0) {
            commentSection.insertAdjacentHTML('beforeend', '<p>No comments yet.</p>');
            return;
        }
        comments.forEach(function (comment) {
            commentSection.insertAdjacentHTML(
                'beforeend',
                '<div class="comment">' +
                '• <a href="' + comment.user.html_url + '" target="_blank">' + comment.user.login + '</a>' +
                ' on' +
                ' <a href="' + comment.html_url + '" target="_blank">' + new Date(comment.created_at).toUTCString() + '</a>' +
                comment.body_html +
                '</div>',
            );
        });
    };
    getComments(apiUrl).then(appendComments);
});
</script>

    </div>

    <script data-goatcounter="https://statoxblog.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    <script async defer src="https://api.newcss.net/latest.js"></script>
    <noscript><img src="https://api.newcss.net/noscript.gif" alt=""></noscript>
</body>
</html>
