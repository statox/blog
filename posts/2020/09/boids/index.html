<!doctype html><html lang="en"><title>Birds flock simulation - The stuff I do</title><meta name="description" content="A personal blog where I write about my side projects"/><meta name="robots" content="index,follow"/><meta name="author" content="statox"/><link rel="canonical" href="https://www.statox.fr/posts/2020/09/boids/"/><meta property="og:title" content="Birds flock simulation - The stuff I do"/><meta property="og:type" content="article"/><meta property="og:url" content="https://www.statox.fr/posts/2020/09/boids/"/><meta property="og:description" content="A personal blog where I write about my side projects"/><meta name="twitter:card" content="summary"/><meta name="twitter:url" content="https://www.statox.fr/posts/2020/09/boids/"/><meta name="twitter:title" content="Birds flock simulation - The stuff I do"/><meta name="twitter:description" content="A personal blog where I write about my side projects"/><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Birds flock simulation</title><meta name="description" content="A personal blog where I write about my side projects"/><meta name="keywords" content="statox blog"/><meta property="og:title" content="The stuff I do"/><meta property="og:url" content="https://www.statox.fr"/><meta property="og:description" content="A personal blog where I write about my side projects"/><meta property="og:type" content="website"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css"/><style>/*!
 * new.css framework forked from https://github.com/xz/new.css
 */:root{--nc-font-sans:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--nc-font-mono:Consolas,monaco,"Ubuntu Mono","Liberation Mono","Courier New",Courier,monospace;--nc-tx-1:#000000;--nc-tx-2:#1a1a1a;--nc-tx-3:#6d7169;--nc-bg-0:#cecece;--nc-bg-1:#ffffff;--nc-bg-2:#f6f8fa;--nc-bg-3:#e5e7eb;--nc-lk-1:#0070f3;--nc-lk-2:#0366d6;--nc-lk-tx:#ffffff;--nc-ac-1:#79ffe1;--nc-ac-tx:#0c4047;--nc-d-tx-1:#ffffff;--nc-d-tx-2:#eeeeee;--nc-d-tx-3:#8a8d87;--nc-d-bg-0:#13191c;--nc-d-bg-1:#000000;--nc-d-bg-2:#111111;--nc-d-bg-3:#222222;--nc-d-lk-1:#3291ff;--nc-d-lk-2:#0070f3;--nc-d-lk-tx:#ffffff;--nc-d-ac-1:#7928ca;--nc-d-ac-tx:#ffffff}@media (prefers-color-scheme:dark){:root{--nc-tx-1:var(--nc-d-tx-1);--nc-tx-2:var(--nc-d-tx-2);--nc-bg-0:var(--nc-d-bg-0);--nc-bg-1:var(--nc-d-bg-1);--nc-bg-2:var(--nc-d-bg-2);--nc-bg-3:var(--nc-d-bg-3);--nc-lk-1:var(--nc-d-lk-1);--nc-lk-2:var(--nc-d-lk-2);--nc-lk-tx:var(--nc-d-lk-tx);--nc-ac-1:var(--nc-d-ac-1);--nc-ac-tx:var(--nc-d-ac-tx)}}*{margin:0;padding:0}address,area,article,aside,audio,blockquote,datalist,details,dl,fieldset,figure,form,iframe,img,input,meter,nav,ol,optgroup,option,output,p,pre,progress,ruby,section,table,textarea,ul,video{margin-bottom:1rem}button,html,input,select{font-family:var(--nc-font-sans)}body{margin:0 auto;max-width:750px;padding:2rem;border-radius:6px;overflow-x:hidden;word-break:break-word;overflow-wrap:break-word;background:var(--nc-bg-1);color:var(--nc-tx-2);font-size:1.03rem;line-height:1.5}::selection{background:var(--nc-ac-1);color:var(--nc-ac-tx)}h1,h2,h3,h4,h5,h6{line-height:1;color:var(--nc-tx-1);padding-top:.875rem}h1,h2,h3{color:var(--nc-tx-1);padding-bottom:2px;margin-bottom:8px;border-bottom:1px solid var(--nc-bg-2)}h4,h5,h6{margin-bottom:.3rem}h1{font-size:2.25rem}h2{font-size:1.85rem}h3{font-size:1.55rem}h4{font-size:1.25rem}h5{font-size:1rem}h6{font-size:.875rem}a{color:var(--nc-lk-1)}a:hover{color:var(--nc-lk-2)}abbr:hover{cursor:help}blockquote{padding:1.5rem;background:var(--nc-bg-2);border-left:5px solid var(--nc-bg-3)}abbr{cursor:help}blockquote :last-child{padding-bottom:0;margin-bottom:0}header{background:var(--nc-bg-2);border-bottom:1px solid var(--nc-bg-3);padding:2rem 1.5rem;margin:-2rem calc(0px - (50vw - 50%)) 2rem;padding-left:calc(50vw - 50%);padding-right:calc(50vw - 50%)}header h1,header h2,header h3{padding-bottom:0;border-bottom:0}header>:first-child{margin-top:0;padding-top:0}header>:last-child{margin-bottom:0}a button,button,input[type=button],input[type=reset],input[type=submit]{font-size:1rem;display:inline-block;padding:6px 12px;text-align:center;text-decoration:none;white-space:nowrap;background:var(--nc-lk-1);color:var(--nc-lk-tx);border:0;border-radius:4px;box-sizing:border-box;cursor:pointer;color:var(--nc-lk-tx)}a button[disabled],button[disabled],input[type=button][disabled],input[type=reset][disabled],input[type=submit][disabled]{cursor:default;opacity:.5;cursor:not-allowed}.button:enabled:hover,.button:focus,button:enabled:hover,button:focus,input[type=button]:enabled:hover,input[type=button]:focus,input[type=reset]:enabled:hover,input[type=reset]:focus,input[type=submit]:enabled:hover,input[type=submit]:focus{background:var(--nc-lk-2)}code,kbd,pre,samp{font-family:var(--nc-font-mono)}code,kbd,pre,samp{background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px;padding:3px 6px;font-size:.9em}kbd{border-bottom:3px solid var(--nc-bg-3)}pre{padding:1rem 1.4rem;max-width:100%;overflow:auto}pre code{background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0}code pre{display:inline;background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0}details{padding:.6rem 1rem;background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px}summary{cursor:pointer;font-weight:700}details[open]{padding-bottom:.75rem}details[open] summary{margin-bottom:6px}details[open]>:last-child{margin-bottom:0}dt{font-weight:700}dd::before{content:"→ "}hr{border:0;border-bottom:1px solid var(--nc-bg-3);margin:1rem auto}fieldset{margin-top:1rem;padding:2rem;border:1px solid var(--nc-bg-3);border-radius:4px}legend{padding:auto .5rem}table{border-collapse:collapse;width:100%}td,th{text-align:left;padding:.5rem}th{font-weight:400;border-bottom:1px solid var(--nc-tx-1)}table caption{font-weight:700;margin-bottom:.5rem}textarea{max-width:100%}ol,ul{padding-left:2rem}li{margin-top:.4rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}mark{padding:3px 6px;background:var(--nc-ac-1);color:var(--nc-ac-tx)}input,select,textarea{padding:6px 12px;margin-bottom:.5rem;background:var(--nc-bg-2);color:var(--nc-tx-2);border:1px solid var(--nc-bg-3);border-radius:4px;box-shadow:none;box-sizing:border-box}img{max-width:100%}/*!
 * prism.js tomorrow night eighties for javascript, coffeescript, css and html
 * based on https://github.com/chriskempson/tomorrow-theme
 * Author: Rose Pritchard
 */code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.post-subheader{font-style:italic;color:var(--nc-tx-3)}.post-date{font-family:var(--nc-font-mono)}@media screen and (max-width:600px){.post-date{display:none}}.formatted-tag{font-family:var(--nc-font-mono);opacity:.6}.not-found{text-align:center}#not-found-canvas{z-index:-1}a{text-decoration:none}pre{max-height:50rem}img{display:block;margin-left:auto;margin-right:auto}ul.post-list{list-style-type:none}ul{list-style-type:circle}.header-anchor{font-size:small}/*!
 * Inspired by material theme https://www.material-theme.com/docs/reference/color-palette/
 */:root{--nc-tx-1:#546e7a;--nc-tx-2:#161d21;--nc-tx-3:#6d7169;--nc-bg-1:#f4f4f4;--nc-bg-2:#eae8e8;--nc-bg-3:#fafafa;--nc-lk-1:#176166;--nc-lk-2:#528aff;--nc-lk-tx:#f3f4f5;--nc-ac-1:#91b859;--nc-ac-tx:#fafafa;--nc-d-tx-1:#ffffff;--nc-d-tx-2:#b7b7b7;--nc-d-tx-3:#8a8d87;--nc-d-bg-1:#1e272c;--nc-d-bg-2:#161d21;--nc-d-bg-3:#263238;--nc-d-lk-1:#5e92ff;--nc-d-lk-2:#528aff;--nc-d-lk-tx:#2e3c43;--nc-d-ac-1:#c3e88d;--nc-d-ac-tx:#263238}@media (prefers-color-scheme:dark){:root{--nc-tx-1:var(--nc-d-tx-1);--nc-tx-2:var(--nc-d-tx-2);--nc-tx-3:var(--nc-d-tx-3);--nc-bg-1:var(--nc-d-bg-1);--nc-bg-2:var(--nc-d-bg-2);--nc-bg-3:var(--nc-d-bg-3);--nc-lk-1:var(--nc-d-lk-1);--nc-lk-2:var(--nc-d-lk-2);--nc-lk-tx:var(--nc-d-lk-tx);--nc-ac-1:var(--nc-d-ac-1);--nc-ac-tx:var(--nc-d-ac-tx)}}.nav-link{text-decoration:none}.nav-link.active{color:var(--nc-lk-2)}.hamburger{width:20px;height:2px;box-shadow:inset 0 0 0 32px,0 -6px,0 6px;margin:16px 7px;display:block}.topnav .icon{display:none}@media screen and (max-width:600px){.topnav span.nav-item:not(.active){display:none}.topnav span.icon{float:right;display:block;right:0;top:0;color:var(--nc-lk-1)}}@media screen and (max-width:600px){.topnav .nav-separator{display:none}}@media screen and (max-width:600px){.topnav.responsive{position:relative}.topnav.responsive span.icon{position:absolute;right:0;top:0;color:var(--nc-lk-2)}.topnav.responsive span{float:none;display:block;text-align:left}.topnav.responsive span.nav-item:not(.active){display:block}}.comment{--comment-bg:#e3efee;--comment-d-bg:#2a4765;margin-top:20px;padding:5px}.add-comment-btn{float:right}.comment-header{background:var(--comment-bg);padding-right:100px;padding-left:10px;border-top-left-radius:10px;border-top-right-radius:10px;padding:5px}.comment-content{border:2px solid var(--comment-bg);border-bottom-left-radius:10px;border-bottom-right-radius:10px}.comment-text{padding:10px}.comment-reactions{border-top:2px solid var(--comment-bg);padding:5px}.comment-reaction-item{padding-right:10px;padding-left:10px;border-right:2px solid var(--comment-bg)}@media (prefers-color-scheme:dark){.comment{--comment-bg:var(--comment-d-bg)}}kbd{--black-800:#242729;--white:#fff;--black-075:#e4e6e8;--black-300:#9fa6ad;--s-prose-line-height:1.5;--ff-sans:Arial,"Helvetica Neue",Helvetica,sans-serif}@media (prefers-color-scheme:dark){kbd{--black-800:#e7e8eb;--white:#2d2d2d;--black-075:#404345;--black-300:#7d848d}}kbd{display:inline-block;margin:0 .1em;padding:.1em .6em;font-family:var(--nc-font-sans);font-size:11px;line-height:var(--s-prose-line-height);color:var(--black-800);text-shadow:0 1px 0 var(--white);background-color:var(--black-075);border:1px solid var(--black-300);border-radius:3px;box-shadow:0 1px 1px rgba(12,13,14,.15),inset 0 1px 0 0 #fff;overflow-wrap:break-word}div.boids button.active{background:#38b57e}div.boids button.inactive{background:#d37676}div.boids tr.settings-table-values td{vertical-align:top;text-align:center}div.boids th{text-align:center}</style><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5"/><script>function navbarToggle(){var a=document.getElementById("header-navbar");"topnav"===a.className?a.className+=" responsive":a.className="topnav"}</script></head><body><header><h1>The stuff I do</h1><nav class="topnav" id="header-navbar" onclick="navbarToggle()"><span class="nav-item"><a class="nav-link" href="/">Home</a> <i class="nav-separator">♢ </i></span><span class="nav-item"><a class="nav-link" href="/projects/">Projects</a> <i class="nav-separator">♢ </i></span><span class="nav-item"><a class="nav-link" href="/coolcovers/">Cool covers</a> <i class="nav-separator">♢ </i></span><span class="nav-item"><a class="nav-link" href="/notes/">Notes</a> <i class="nav-separator">♢ </i></span><span class="nav-item"><a class="nav-link" href="/about/">About</a> <i class="nav-separator">♢ </i></span><span class="nav-item"><a class="nav-link" href="/ring/">Ring</a> <i class="nav-separator">♢ </i></span><span class="nav-item"><a class="nav-link" href="/feed.xml">RSS</a> <i class="nav-separator"></i> </span><span class="icon hamburger" onclick="navbarToggle()"></span></nav></header><div class="content-container"><h2>Birds flock simulation</h2><p class="post-subheader"><span id="post_date"></span> - 1429 words - <span id="commentCounter"></span> <span id="comment_word"></span></p><p><a href="/">← Posts</a></p><h3>What is this?</h3><div><p>This is a simulation of Boids: some little digital creatures invented by <a href="http://www.red3d.com/cwr/boids/" target="_blank" rel="noopener noreferrer">Craig Renolds</a>. Each Boid has its own perception circle i.e. a limited circle around the creature where it has the ability to see its neighbors and how they behave. In addition to this perception circle all the Boids follow the same basic rules depending on their neighbors behavior.</p><p>This kind of simple individual rules allow the emerging of group behaviors which are fascinating to observe <i>-at least to me :)-</i> as they are not lead by a single element of the group but are the result of combined individual behaviors.</p><p>This kind of simulation has been used for example to generate crowds of people or flocks of animals in CGI.</p><pre>
TODO: Add a scene of the Uruk Hai walking from LOTR (or something less dorky but still illustrative)</pre><p>You can play with the different controls over and under the simulation to have a sense of how it works. To get a better understanding you can have a read at <a href="#explanation">the explanation</a> which should help you to understand step by step what is going on here.</p><p style="color:red"><i>The controls of the simulation are not compatible with mobile devices and prevent some features from working. Namely the creation of Boids, by clicking on the screen.</i></p><p><i>This page is a work in progress which might never get finished as I'm planning another implementation with a different framework, so... to be continued.</i></p></div><h3>Simulation</h3><div class="boids" id="boidsApp"><div><label>Flock population</label> <input id="flockSizeInput" type="number" v-model.number="CROWD_SIZE"/> <button id="flockSizeBtn" onclick="resetBirds()">Reset flock</button> <button id="flockSizeBtn" onclick="resetObstacles()">Reset obstacles</button></div><div><table><tr><td><button v-bind:class="{active: enableFollowMouse, inactive: !enableFollowMouse}" id="followMouseButton">Follow mouse</button></td><td><button v-bind:class="{active: enableFollowTarget, inactive: !enableFollowTarget}" id="followTargetButton">Follow target</button></td><td><button v-bind:class="{active: enableWrapEdges, inactive: !enableWrapEdges}" id="wrapEdgesButton">Edge wrapping</button></td><td><button v-bind:class="{active: enableShowPerception, inactive: !enableShowPerception}" id="showPerceptionCirclesButton">Show perception</button></td></tr></table></div><div><table><tr class="settings-table-values"><th>Wiggling</th><th>Alignment</th><th>Separation</th><th>Cohesion</th></tr><tr class="settings-table-values"><td><div><button v-bind:class="{active: enableWiggle, inactive: !enableWiggle}" id="toggleWiggleButton">Toggle wiggling</button><p>Allowed angle <span id="wiggleAngleMarker">{{MAX_WIGGLE_ANGLE}}</span></p><input type="range" min="0" max="360" v-model.number="MAX_WIGGLE_ANGLE" step="0.5" class="slider" id="wiggleAngleSlider"/><p>Intensity <span id="wiggleIntensityeMarker">{{WIGGLE_ACC_INTENSITY}}</span></p><input type="range" min="0" max="5" v-model.number="WIGGLE_ACC_INTENSITY" step="0.1" class="slider" id="wiggleIntensitySlider"/><p>Max velocity <span id="maxSpeedMarker">{{MAX_SPEED}}</span></p><input type="range" min="0" max="20" v-model.number="MAX_SPEED" step="0.1" class="slider" id="boidSpeedSlider"/></div></td><td><div><button v-bind:class="{active: enableAlignment, inactive: !enableAlignment}" id="toggleAlignmentButton">Toggle alignment</button><p>Perception distance <span id="alignmentPerceptionMarker">{{ALIGNMENT_FRIENDS_RADIUS}}</span>px</p><input type="range" min="1" max="500" v-model.number="ALIGNMENT_FRIENDS_RADIUS" class="slider" id="alignementPerceptionDistanceSlider"/><p>Intensity <span id="alignmentIntensityMarker">{{ALIGNMENT_ACC_INTENSITY}}</span>N</p><input type="range" min="0" max="5" v-model.number="ALIGNMENT_ACC_INTENSITY" step="0.1" class="slider" id="alignementIntensitySlider"/></div></td><td><div><button v-bind:class="{active: enableSeparation, inactive: !enableSeparation}" id="toggleSeparationButton">Toggle separation</button><p>Perception distance <span id="separationPerceptionMarker">{{SEPARATION_FRIENDS_RADIUS}}</span>px</p><input type="range" min="1" max="500" v-model.number="SEPARATION_FRIENDS_RADIUS" class="slider" id="separationPerceptionDistanceSlider"/><p>Intensity <span id="separationIntensityMarker">{{SEPARATION_ACC_INTENSITY}}</span>N</p><input type="range" min="0" max="5" v-model.number="SEPARATION_ACC_INTENSITY" step="0.1" class="slider" id="separationIntensitySlider"/></div></td><td><div><button v-bind:class="{active: enableCohesion, inactive: !enableCohesion}" id="toggleCohesionButton">Toggle cohesion</button><p>Perception distance <span id="cohesionPerceptionMarker">{{COHESION_FRIENDS_RADIUS}}</span>px</p><input type="range" min="1" max="500" v-model.number="COHESION_FRIENDS_RADIUS" class="slider" id="cohesionPerceptionDistanceSlider"/><p>Intensity <span id="cohesionIntensityMarker">{{COHESION_ACC_INTENSITY}}</span>N</p><input type="range" min="0" max="5" v-model.number="COHESION_ACC_INTENSITY" step="0.1" class="slider" id="cohesionIntensitySlider"/></div></td></tr></table></div><div oncontextmenu="return!1" id="canvasDiv"></div><div><table><tr><td><button v-bind:class="{active: enableRoundShape, inactive: !enableRoundShape}" id="changeShapeButton">Change shape</button></td><td><button v-bind:class="{active: enableObstaclesDrawing, inactive: !enableObstaclesDrawing}" id="obstaclesDrawingButton">Obstacles</button></td><td><button v-bind:class="{active: enablePredatorDrawing, inactive: !enablePredatorDrawing}" id="predatorDrawingButton">Predators</button></td></tr></table><div v-if="enableObstaclesDrawing || enablePredatorDrawing">When "obstacles" or "predators" is enabled move your mouse over the screen and the items will pop regularly just under your mouse.</div><div v-if="goBackInInterface"><a style="width:100%" v-bind:href="'#' + goBackInInterface"><button>Back to explanation</button></a></div></div></div><br/><h3 id="explanation">Explanation</h3><div><p>In this part of the page I will detail the different rules followed by the Boids to show how they combine. Each button moves the page to the simulation and sets the rules as I want you to see them when you are reading .</p><p>Note that you can use the "Back to explanation" to go back to where you were.</p><h4>Basic behavior</h4><p id="basicBehaviorAnchor">First let's create a single Boid (<a href="#canvasDiv" onclick="scenarioOneBoidNoWiggle()">Click here</a>)</p><p>Our Boid is living a monotonous life randomly flying in its 2 dimensional space.</p><p>To move, our Boid has two 2 dimensional vectors with a x and y component. One is its speed which allows it to go forward in a direction. And the second vector is its acceleration which is used to change the direction of the speed, allowing the Boid to move smoothly like an actual object on a 2D plan.</p><p>We set its allowed wiggling angle to 0° which means that currently the vector representing its acceleration will not change of direction. Consequently our Boid moves in straight lines.</p><p>You can change its "Max velocity" setting to see it moving faster or slower</p><p id="basicBehavior2Anchor">Now let's change its allowed wiggling angle to 50° (<a href="#canvasDiv" onclick="scenarioOneBoidWiggle()">Click here</a>). Our Boid is not moving in straight lines anymore: each time it moves the vector representing its acceleration is randomly rotated which gives it this happy wiggling attitude.</p><p>If you increase its max velocity observe how it seems to wiggle less: This is because its speed vector becomes more important than its acceleration vector. To change that in a limited way you can also increase the intensity of the wiggling vector</p><p id="basicBehavior3Anchor">This is the basic behavior of our Boid, you can click on the screen to add more Boids (or <a href="#canvasDiv" onclick="scenarioMultipleBoidsWiggle()">Click here</a>) and you will notice that they all behave as rubber balls bouncing on the edges of the screen... Not really exciting I agree.</p><h4>Alignment</h4><p id="alignmentAnchor">To start observing some cool behavior let's enable the first rule: Alignment (<a href="#canvasDiv" onclick="scenarioBoidsAlignment()">Click here</a>)</p><p>The green circle around a Boid is the actual representation of its perception circle for the alignment rule: all the neighbors within this circle are "seen" by the Boids and used in the alignment rule</p><p>Now we can see that our flock doesn't look as random as before: Boids close to each other start going in the same direction. The alignment rule makes each Boid look at its neighbors' acceleration and incorporate the average of their acceleration it its own. Its acceleration is now a mix of both its own random wiggling and the average acceleration of its neighbors, making them following each other.</p><p>This is our first emerging behavior!</p><p>As there are only a few Boids on the screen they eventually end up going all in the same direction in a pretty compact group.</p><h4>Separation</h4><p>Having our Boids going in the same direction is great but they are literally walking (Flying? Crawling?) on top of each other. This is not ideal lets give them some individual space!</p><p id="separationAnchor">To do so we can enable the separation rule (<a href="#canvasDiv" onclick="scenarioBoidsSeparation()">Click here</a>)</p><p>The perception circle for this rule is shown in red</p><p>This adds a new rule to our Boids behavior: They "see" the position of each of their close neighbors and their acceleration is moved towards the least crowded direction. In other words they continue following the same direction as their friends but they also continually move away from them.</p><p>With enough time this gives us the same flock as before but this time it is much more spaced out.</p><h4>Cohesion</h4><p id="cohesionAnchor">Let's introduce the last rule of our Boids behavior: Cohesion (<a href="#canvasDiv" onclick="scenarioBoidsCohesion()">Click here</a>)</p><p>The perception circle for this rule is shown in blue</p><p>This rule is not the most obvious to observe right now. It shifts the acceleration of our Boids towards the center of mass of their local flock.</p><p>What that means is that each Boids looks at its close neighbors and move towards the center of this group of Boids. This allow the creation of small groups of Boids going in the same direction and staying together (but still not too close to each other, thanks to the separation rule)</p><p>That's it! We now have the basic behavior ruling our Boids moves. Now let's add some troubles to their life</p><h4>Goal</h4><p id="targetAnchor">To be able observe some emerging behavior let's add a goal to our birds: we will create a target moving randomly on the screen. (<a href="#canvasDiv" onclick="scenarioTarget()">Click here</a>).</p><p>This target attracts the Boids close to its position: we could see it as a prey like a group of insect for a flock of birds.</p><p>Our flock now has a goal! Remember than none of the individual members of the flock is programmed to lead its friends they only obey a list of rules working given what they can see in their circle of perception.</p><p>So far our little birds are happily floating in their space and reaching their goal, now let's scare them out!</p><h4>Predators and obstacles</h4><p id="predatorsAnchor">To make this visualization more interesting let's add some obstacles that our birds can't go through and some predators which will fly through the float and that Boids will try to avoid as much as possible. (<a href="#canvasDiv" onclick="scenarioPredators()">Click here</a>)</p><p>Look at our Boids! Trying to reach their target while avoiding these mean red circles, aren't they the cutest? 😍</p><h4>Playing around</h4><p>Now that you understand how these little creature behave don't hesitate to play with them!</p><p>I did this simulation to allow the user to change the perception circle for each rule as well as its intensity (i.e. how strong it is compared to the other rules and to the birds wiggling). And I have spent a faire amount of time changing all these parameters to create different behaviors... If that is your thing you might have some fun, if it's not you might think that I'm crazy but it's fine because I had a lot of fun creating this page and in the end that is what matters when you code: Having fun!</p></div><h3>Resources</h3><div><p>Here is a bunch of resources I've been using to create this page</p><ul><li><a href="https://youtu.be/w-Oy4TYDnoQ" target="_blank" rel="noopener noreferrer">This cool Youtube video (in French) which introduced me to the concept of Boids</a></li><li><a href="http://www.red3d.com/cwr/boids/" target="_blank" rel="noopener noreferrer">Craig Renolds' page about his Boids</a> which is interesting to get an history of his research and an explanation of the rules.</li><li><a href="https://youtu.be/6vX8wT1G798">Daniel Shiffman's amazing Nature of Code video series</a>. Which is an great resource to get started with simulating "natural" things in the browser.</li><li><a href="http://www.vergenet.net/~conrad/boids/pseudocode.html" target="_blank" rel="noopener noreferrer">A pseudocode explanation of Boids</a></li><li><a href="https://github.com/jackaperkins/boids">A implementation of Boids in processing</a></li><li><a href="https://www.raymondcamden.com/2020/04/03/quick-tip-on-using-vue-with-eleventy">Nothing to do with Boids but a cool tips about integrating VueJS to an eleventy website</a> which was pretty helpful to get the controls to work.</li></ul></div><script src="https://cdn.jsdelivr.net/npm/vue"></script><script src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script><script src="https://cdn.jsdelivr.net/gh/CodingTrain/QuadTree/quadtree.js"></script><script src="sketch.js"></script><script src="Interface.js"></script><script src="Bird.js"></script><script src="Predator.js"></script><script src="Target.js"></script><script src="Obstacle.js"></script><script src="utils.js"></script><p><a href="/">← Posts</a></p><hr/><p></p><h3>Related posts</h3><p>Posts in the same category: <span class="formatted-tag">[p5]</span></p><ul><li><span class="post-date">Jul 2020</span> <a class="post-link" href="/posts/2020/07/minesweeper/">Including a p5.js project in this website (Minesweeper 💣)</a></li><li><span class="post-date">Sep 2020</span> <a class="post-link" href="/posts/2020/09/p5-jump/">A boring jumping game</a></li></ul><hr/><comments><h3>Comments</h3><a class="add-comment-btn" href="https://github.com/statox/blog-comments/issues/12#new_comment_field" target="_blank" rel="noopener noreferrer"><button>Comment on Github</button></a><br/></comments><script>const reactionEmojis={laugh:"&#x1F600","+1":"&#x1F44D","-1":"&#x1F44E",hooray:"&#x1F389",confused:"&#x1F615",heart:"&#x2665",rocket:"&#x1F680",eyes:"&#x1F440"};function domReady(e){document.addEventListener("DOMContentLoaded",e),"interactive"!==document.readyState&&"complete"!==document.readyState||e()}function countReactions(e){const t={};return e.forEach(e=>{t[e.content]?t[e.content]++:t[e.content]=1}),t}function formatReactions(e){if(!e.length)return"";const n=countReactions(e);return Object.keys(n).reduce((e,t)=>{return e+'<span class="comment-reaction-item">'+(reactionEmojis[t]||`:${t}:`)+"&nbsp"+n[t]+"</span>"},"")}function appendComments(e){const o=document.querySelector("comments"),t=document.getElementById("commentCounter");t&&(t.innerText=e.length||0),e&&e.forEach&&0!==e.length?e.forEach(function(e){var t=formatCommentDate(new Date(e.created_at)),t=`<a href="${e.user.html_url} target="_blank">${e.user.login}</a>`+" on "+`<a href="${e.html_url}" target="_blank">${t}</a>`;let n="";n+='<div class="comment">',n+='    <div class="comment-header">'+t+"</div>",n+='    <div class="comment-content">',n+='        <div class="comment-text">'+e.body_html+"</div>",0<e.reactions.length&&(n+='        <div class="comment-reactions">'+formatReactions(e.reactions)+"</div>"),n+="    </div>",n+="</div>",o.insertAdjacentHTML("beforeend",n)}):o.insertAdjacentHTML("beforeend","<p>No comments yet.</p>")}async function getComments(e){const t=await fetch(`https://api.github.com/repos/statox/blog-comments/issues/${e}/comments`,{method:"GET",mode:"cors",cache:"no-cache",headers:{Accept:"application/vnd.github.v3.html+json"}});return t.json()}async function getReactions(e){const t=await fetch(`https://api.github.com/repos/statox/blog-comments/issues/comments/${e}/reactions`,{method:"GET",mode:"cors",cache:"no-cache",headers:{Accept:"application/vnd.github.squirrel-girl-preview+json"}});return t.json()}function formatCommentDate(e){return`${e.getDate()}/${e.getUTCMonth()+1}/${e.getFullYear()}`}function setupCommentsInPage(t){domReady(async()=>{const e=await getComments(t);await Promise.all(e.map(async e=>{e.reactions=await getReactions(e.id)})),appendComments(e)})}function adaptToScreenSize(e){const t=new Date("Thu Sep 03 2020 00:00:00 GMT+0000 (Coordinated Universal Time)");let n=t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),o="comments";e.matches&&(n=t.toLocaleDateString(void 0,{year:"numeric",month:"numeric",day:"numeric"}),o="💬"),document.getElementById("post_date").textContent=n,document.getElementById("comment_word").textContent=o}setupCommentsInPage(12);var x=window.matchMedia("(max-width: 500px)");adaptToScreenSize(x),x.addListener(adaptToScreenSize)</script></div><script data-goatcounter="https://statoxblog.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script></body></html>