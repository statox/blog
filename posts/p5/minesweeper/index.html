<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>The stuff I do</title>
    <meta name="description" content="A personal blog where I write about my side projects">
    <meta name="keywords" content="statox blog">
    <meta property="og:title" content="The stuff I do">
    <meta property="og:url" content="https://www.statox.fr">
    <meta property="og:description" content="A personal blog where I write about my side projects">
    <meta property="og:type" content="website">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

    
    <link rel="stylesheet" href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css">

    
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/minesweeper.css">

</head>
<body>
    <header>
        <h1>The stuff I do</h1>
        <nav>
            <a href="/">Home</a> /
            <a href="/notes/">Notes</a> /
            <a href="/about/">About</a> /
            <a href="/social/">Social</a> /
            <a href="/feed.xml">RSS</a>
        </nav>
    </header>

    <div class="content-container">
        
<h2>Including a p5.js project in this website (Minesweeper üí£)</h2>
<p><a href="/">‚Üê Posts</a></p>


<p>
The first posts I wrote on this site and which were about p5.js applications are based on code that I wrote before creating the site. As I already hosted the applications on their own Github pages it was easier to simply have a link to these pages in the posts. For example check my <a href="../p5-cellular-automaton/">cellular automata post</a>.
</p>
<p>
Now that this site is created I wanted to see how I could integrate a p5.js application directly in its pages. This is now done with this simple minesweeper demo. It didn't required a lot of work other than adding a call to a cdn in the post source to get p5.js and updating my <code>.eleventy.js</code> to add <code>.js</code> files to the list of template files to compile.
</p>
<p>
For now I am happy with this test but there are still a few things I'd like to test:
</p>
<ul>
    <li>Check how to put this kind on posts in their own Github repo and add them to the site's source code as git submodules</li>
    <li>Check how I can integrate a framework like Vue.js to avoid having to create my own <code>interface.js</code> with some ugly functions to update the UI and send the data to the p5.js sketch</li>
</ul>

<h2>The minesweeper</h2>

<p>
To create this first p5.js integrated demo I wanted something simple to code which I could have running pretty fast. Recreating a minesweeper has several advantages:
</p>

<ul>
    <li>This is a well known game which wouldn't require me to do some research on how to make its UI or which corner cases rules exist.</li>
    <li>It includes a kind of maze solving algorithm to automatically open the cells clicked when they are not near a mine. And I <em>love</em> this kind of algorithm, even though this one is fairly short and simple.</li>
    <li>It is a nice way to prepare a future project of creating a minesweeper on an hexagonal grid. Actually that was my initial project but I realized that it's not as trivial as I would have expected and thus it would be better to make it a completely seperated project.</li>
</ul>

<p>
There are still a number of features I'd like to implement even in this squared grid minesweeper like having a deterministic grid (i.e. not having cases where the user has to choose a cell randomly), having cells with several mines to make it a bit harder to play or even creating an AI which would open the cases based on probabilities... But for now that's a nice little demo, even though I must admit that it was more fun to create it than to play with it (because personally I find minesweeper to be a terribly boring game!)
</p>

<h2>The demo</h2> 
<div>
    <span>Grid size <input  id="COLInput" type="number" min="1" onchange="updateParams()"></input></span>
    <span>Filling ratio <input id="RATIOInput" type="number" max="1" onchange="updateParams()"></input></span>
</div>
<div oncontextmenu="return false;" id="canvasDiv">
    <span style="color:red; font-family: D7CR" id="timeSpan">0</span>
    <span id="resetSpan"><button onclick="newGame()">Reset</button></span>
    <span style="color:red; font-family: D7CR" id="flagsSpan">0</span>
</div>

<script src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.js"></script>
<script src="sketch.js"></script>
<script src="Cell.js"></script>
<script src="CellSquare.js"></script>
<script src="interface.js"></script>
<script src="utils.js"></script>
<script src="Game.js"></script>


<p><a href="/">‚Üê Posts</a></p>

<hr>
<comments>
    <h3>Comments</h3>
    <a class="add-comment" href="https://github.com/statox/blog-comments/issues/11#new_comment_field"  target="_blank" rel="noopener noreferrer">
        <button>Comment on Github</button>
    </a>
    <br>
</comments>

<script type="text/javascript">


function domReady(fn) {
    document.addEventListener('DOMContentLoaded', fn);
    if (document.readyState === 'interactive' || document.readyState === 'complete') {
        fn();
    }
}

async function getComments(url = '') {
    const response = await fetch(url, {
        method: 'GET',
        mode: 'cors',
        cache: 'no-cache',
        headers: { Accept: 'application/vnd.github.v3.html+json' },
    });
    return response.json();
}

domReady(() => {
    const apiUrl = 'https://api.github.com/repos/statox/blog-comments/issues/11/comments';
    const appendComments = function (comments) {
        const commentSection = document.querySelector('comments');
        if (!comments || !comments.forEach || comments.length === 0) {
            commentSection.insertAdjacentHTML('beforeend', '<p>No comments yet.</p>');
            return;
        }
        comments.forEach(function (comment) {
            commentSection.insertAdjacentHTML(
                'beforeend',
                '<div class="comment">' +
                '‚Ä¢ <a href="' + comment.user.html_url + '" target="_blank">' + comment.user.login + '</a>' +
                ' on' +
                ' <a href="' + comment.html_url + '" target="_blank">' + new Date(comment.created_at).toUTCString() + '</a>' +
                comment.body_html +
                '</div>',
            );
        });
    };
    getComments(apiUrl).then(appendComments);
});
</script>

    </div>

    <script data-goatcounter="https://statoxblog.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    <script async defer src="https://api.newcss.net/latest.js"></script>
    <noscript><img src="https://api.newcss.net/noscript.gif" alt=""></noscript>
</body>
</html>
