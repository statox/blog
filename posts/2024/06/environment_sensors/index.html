<!doctype html><html lang="en"><title>Creating my homemade environmental sensors system - The stuff I do</title><meta name="description" content="A personal blog where I write about my side projects"/><meta name="robots" content="index,follow"/><meta name="author" content="[object Object]"/><link rel="canonical" href="https://www.statox.fr/posts/2024/06/environment_sensors/"/><meta property="og:title" content="Creating my homemade environmental sensors system - The stuff I do"/><meta property="og:type" content="article"/><meta property="og:url" content="https://www.statox.fr/posts/2024/06/environment_sensors/"/><meta property="og:description" content="A personal blog where I write about my side projects"/><meta name="twitter:card" content="summary"/><meta name="twitter:url" content="https://www.statox.fr/posts/2024/06/environment_sensors/"/><meta name="twitter:title" content="Creating my homemade environmental sensors system - The stuff I do"/><meta name="twitter:description" content="A personal blog where I write about my side projects"/><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Creating my homemade environmental sensors system</title><meta name="description" content="A personal blog where I write about my side projects"/><meta name="keywords" content="statox blog"/><meta name="generator" content="Eleventy"/><meta property="og:title" content="The stuff I do"/><meta property="og:url" content="https://www.statox.fr"/><meta property="og:description" content="A personal blog where I write about my side projects"/><meta property="og:type" content="website"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5"/><script>const bigScreenQuery=window.matchMedia("(max-width: 600px)");let bigScreen=!bigScreenQuery.matches;function navbarNavigate(e){var t=document.getElementById("header-navbar");(bigScreen||t.className.includes("responsive"))&&(document.location.pathname=e)}function navbarToggle(){var e=document.getElementById("header-navbar");"topnav"===e.className?e.className+=" responsive":e.className="topnav"}function toggleDarkTheme(){var e,t,n="1"===getComputedStyle(document.documentElement).getPropertyValue("--is-light-theme");const o=n?"-d":"-l";for({current:e,target:t}of["--nc-tx-1","--nc-tx-2","--nc-tx-3","--nc-bg-0","--nc-bg-1","--nc-bg-2","--nc-bg-3","--nc-lk-1","--nc-lk-2","--nc-lk-tx","--nc-ac-1","--nc-ac-tx"].map(e=>({current:e,target:e.slice(0,4)+o+e.slice(4)}))){var a=getComputedStyle(document.documentElement).getPropertyValue(t);document.documentElement.style.setProperty(e,a)}document.documentElement.style.setProperty("--is-light-theme",n?"0":"1"),writeLightThemeCookie(n?"0":"1")}function domReady(e){document.addEventListener("DOMContentLoaded",e),"interactive"!==document.readyState&&"complete"!==document.readyState||e()}function readLightThemeCookie(){return localStorage.getItem("lighttheme")}function writeLightThemeCookie(e){if("0"!==e&&"1"!==e)throw new Error("Invalid value for cookie lighttheme",e);localStorage.setItem("lighttheme",e)}bigScreenQuery.addListener(e=>bigScreen=!e.matches),domReady(()=>{var e=readLightThemeCookie();e&&getComputedStyle(document.documentElement).getPropertyValue("--is-light-theme")!==e&&toggleDarkTheme()})</script><style>/*!
 * new.css framework forked from https://github.com/xz/new.css
 */:root{--nc-font-sans:"Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Open Sans","Helvetica Neue",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";--nc-font-mono:Consolas,monaco,"Ubuntu Mono","Liberation Mono","Courier New",Courier,monospace;--is-light-theme:1;--nc-l-tx-1:#000000;--nc-l-tx-2:#1a1a1a;--nc-l-tx-3:#6d7169;--nc-l-bg-0:#cecece;--nc-l-bg-1:#ffffff;--nc-l-bg-2:#f6f8fa;--nc-l-bg-3:#e5e7eb;--nc-l-lk-1:#0070f3;--nc-l-lk-2:#0366d6;--nc-l-lk-tx:#ffffff;--nc-l-ac-1:#79ffe1;--nc-l-ac-tx:#0c4047;--nc-d-tx-1:#ffffff;--nc-d-tx-2:#eeeeee;--nc-d-tx-3:#8a8d87;--nc-d-bg-0:#13191c;--nc-d-bg-1:#000000;--nc-d-bg-2:#111111;--nc-d-bg-3:#222222;--nc-d-lk-1:#3291ff;--nc-d-lk-2:#0070f3;--nc-d-lk-tx:#ffffff;--nc-d-ac-1:#7928ca;--nc-d-ac-tx:#ffffff;--nc-tx-1:var(--nc-l-tx-1);--nc-tx-2:var(--nc-l-tx-2);--nc-tx-3:var(--nc-l-tx-3);--nc-bg-0:var(--nc-l-bg-0);--nc-bg-1:var(--nc-l-bg-1);--nc-bg-2:var(--nc-l-bg-2);--nc-bg-3:var(--nc-l-bg-3);--nc-lk-1:var(--nc-l-lk-1);--nc-lk-2:var(--nc-l-lk-2);--nc-lk-tx:var(--nc-l-lk-tx);--nc-ac-1:var(--nc-l-ac-1);--nc-ac-tx:var(--nc-l-ac-tx)}@media (prefers-color-scheme:dark){:root{--is-light-theme:0;--nc-tx-1:var(--nc-d-tx-1);--nc-tx-2:var(--nc-d-tx-2);--nc-bg-0:var(--nc-d-bg-0);--nc-bg-1:var(--nc-d-bg-1);--nc-bg-2:var(--nc-d-bg-2);--nc-bg-3:var(--nc-d-bg-3);--nc-lk-1:var(--nc-d-lk-1);--nc-lk-2:var(--nc-d-lk-2);--nc-lk-tx:var(--nc-d-lk-tx);--nc-ac-1:var(--nc-d-ac-1);--nc-ac-tx:var(--nc-d-ac-tx)}}*{margin:0;padding:0}address,area,article,aside,audio,blockquote,datalist,details,dl,fieldset,figure,form,iframe,img,input,meter,nav,ol,optgroup,option,output,p,pre,progress,ruby,section,table,textarea,ul,video{margin-bottom:1rem}button,html,input,select{font-family:var(--nc-font-sans)}body{margin:0 auto;max-width:750px;padding:2rem;border-radius:6px;overflow-x:hidden;word-break:break-word;overflow-wrap:break-word;background:var(--nc-bg-1);color:var(--nc-tx-2);font-size:1.03rem;line-height:1.5}::selection{background:var(--nc-ac-1);color:var(--nc-ac-tx)}h1,h2,h3,h4,h5,h6{line-height:1;color:var(--nc-tx-1);padding-top:.875rem}h1,h2,h3{color:var(--nc-tx-1);padding-bottom:2px;margin-bottom:8px;border-bottom:1px solid var(--nc-bg-2)}h4,h5,h6{margin-bottom:.3rem}h1{font-size:2.25rem}h2{font-size:1.85rem}h3{font-size:1.55rem}h4{font-size:1.25rem}h5{font-size:1rem}h6{font-size:.875rem}a{color:var(--nc-lk-1)}a:hover{color:var(--nc-lk-2)}abbr:hover{cursor:help}blockquote{padding:1.5rem;background:var(--nc-bg-2);border-left:5px solid var(--nc-bg-3)}abbr{cursor:help}blockquote :last-child{padding-bottom:0;margin-bottom:0}header{background:var(--nc-bg-2);border-bottom:1px solid var(--nc-bg-3);padding:2rem 1.5rem;margin:-2rem calc(0px - (50vw - 50%)) 2rem;padding-left:calc(50vw - 50%);padding-right:calc(50vw - 50%)}header h1,header h2,header h3{padding-bottom:0;border-bottom:0}header>:first-child{margin-top:0;padding-top:0}header>:last-child{margin-bottom:0}a button,button,input[type=button],input[type=reset],input[type=submit]{font-size:1rem;display:inline-block;padding:6px 12px;text-align:center;text-decoration:none;white-space:nowrap;background:var(--nc-lk-1);color:var(--nc-lk-tx);border:0;border-radius:4px;box-sizing:border-box;cursor:pointer;color:var(--nc-lk-tx)}a button[disabled],button[disabled],input[type=button][disabled],input[type=reset][disabled],input[type=submit][disabled]{cursor:default;opacity:.5;cursor:not-allowed}.button:enabled:hover,.button:focus,button:enabled:hover,button:focus,input[type=button]:enabled:hover,input[type=button]:focus,input[type=reset]:enabled:hover,input[type=reset]:focus,input[type=submit]:enabled:hover,input[type=submit]:focus{background:var(--nc-lk-2)}code,kbd,pre,samp{font-family:var(--nc-font-mono)}code,kbd,pre,samp{background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px;padding:3px 6px;font-size:.9em}kbd{border-bottom:3px solid var(--nc-bg-3)}pre{padding:1rem 1.4rem;max-width:100%;overflow:auto}pre code{background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0}code pre{display:inline;background:inherit;font-size:inherit;color:inherit;border:0;padding:0;margin:0}details{padding:.6rem 1rem;background:var(--nc-bg-2);border:1px solid var(--nc-bg-3);border-radius:4px}summary{cursor:pointer;font-weight:700}details[open]{padding-bottom:.75rem}details[open] summary{margin-bottom:6px}details[open]>:last-child{margin-bottom:0}dt{font-weight:700}dd::before{content:"→ "}hr{border:0;border-bottom:1px solid var(--nc-bg-3);margin:1rem auto}fieldset{margin-top:1rem;padding:2rem;border:1px solid var(--nc-bg-3);border-radius:4px}legend{padding:auto .5rem}table{border-collapse:collapse;width:100%}td,th{text-align:left;padding:.5rem}th{font-weight:400;border-bottom:1px solid var(--nc-tx-1)}table caption{font-weight:700;margin-bottom:.5rem}textarea{max-width:100%}ol,ul{padding-left:2rem}li{margin-top:.4rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}mark{padding:3px 6px;background:var(--nc-ac-1);color:var(--nc-ac-tx)}input,select,textarea{padding:6px 12px;margin-bottom:.5rem;background:var(--nc-bg-2);color:var(--nc-tx-2);border:1px solid var(--nc-bg-3);border-radius:4px;box-shadow:none;box-sizing:border-box}img{max-width:100%}/*!
 * prism.js tomorrow night eighties for javascript, coffeescript, css and html
 * based on https://github.com/chriskempson/tomorrow-theme
 * Author: Rose Pritchard
 */code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}.formatted-tag{font-family:var(--nc-font-mono);opacity:.6}.not-found{text-align:center}#not-found-canvas{z-index:-1}a{text-decoration:none}pre{max-height:50rem}img{display:block;margin-left:auto;margin-right:auto}ul{list-style-type:circle}.header-anchor{font-size:small}.hidden{display:none}/*!
 * Inspired by material theme https://www.material-theme.com/docs/reference/color-palette/
 */:root{--is-light-theme:1;--nc-l-tx-1:#546e7a;--nc-l-tx-2:#161d21;--nc-l-tx-3:#6d7169;--nc-l-bg-1:#f4f4f4;--nc-l-bg-2:#eae8e8;--nc-l-bg-3:#fafafa;--nc-l-lk-1:#176166;--nc-l-lk-2:#528aff;--nc-l-lk-tx:#f3f4f5;--nc-l-ac-1:#91b859;--nc-l-ac-tx:#fafafa;--nc-d-tx-1:#ffffff;--nc-d-tx-2:#b7b7b7;--nc-d-tx-3:#8a8d87;--nc-d-bg-1:#1e272c;--nc-d-bg-2:#161d21;--nc-d-bg-3:#263238;--nc-d-lk-1:#5e92ff;--nc-d-lk-2:#99b2e8;--nc-d-lk-tx:#2e3c43;--nc-d-ac-1:#c3e88d;--nc-d-ac-tx:#263238}@media (prefers-color-scheme:dark){:root{--is-light-theme:0;--nc-tx-1:var(--nc-d-tx-1);--nc-tx-2:var(--nc-d-tx-2);--nc-tx-3:var(--nc-d-tx-3);--nc-bg-1:var(--nc-d-bg-1);--nc-bg-2:var(--nc-d-bg-2);--nc-bg-3:var(--nc-d-bg-3);--nc-lk-1:var(--nc-d-lk-1);--nc-lk-2:var(--nc-d-lk-2);--nc-lk-tx:var(--nc-d-lk-tx);--nc-ac-1:var(--nc-d-ac-1);--nc-ac-tx:var(--nc-d-ac-tx)}}.nav-link{text-decoration:none}.nav-link.active{color:var(--nc-lk-2)}.hamburger{width:20px;height:2px;box-shadow:inset 0 0 0 32px,0 -6px,0 6px;margin:16px 7px;display:block}.topnav .icon{display:none}@media screen and (max-width:600px){.topnav span.nav-item:not(.active){display:none}.topnav span.icon{float:right;display:block;right:0;top:0;color:var(--nc-lk-1)}.topnav .nav-separator{display:none}.topnav.responsive{position:relative}.topnav.responsive span.icon{position:absolute;right:0;top:0;color:var(--nc-lk-2)}.topnav.responsive span{float:none;display:block;text-align:left}.topnav.responsive span.nav-item:not(.active){display:block}}.comment{--comment-bg:#e3efee;--comment-d-bg:#2a4765;margin-top:20px;padding:5px}.add-comment-btn{float:right}.comment-header{background:var(--comment-bg);padding-right:100px;padding-left:10px;border-top-left-radius:10px;border-top-right-radius:10px;padding:5px}.comment-content{border:2px solid var(--comment-bg);border-bottom-left-radius:10px;border-bottom-right-radius:10px}.comment-text{padding:10px}.comment-reactions{border-top:2px solid var(--comment-bg);padding:5px}.comment-reaction-item{padding-right:10px;padding-left:10px;border-right:2px solid var(--comment-bg)}@media (prefers-color-scheme:dark){.comment{--comment-bg:var(--comment-d-bg)}}kbd{--black-800:#242729;--white:#fff;--black-075:#e4e6e8;--black-300:#9fa6ad;--s-prose-line-height:1.5;--ff-sans:Arial,"Helvetica Neue",Helvetica,sans-serif}@media (prefers-color-scheme:dark){kbd{--black-800:#e7e8eb;--white:#2d2d2d;--black-075:#404345;--black-300:#7d848d}}kbd{display:inline-block;margin:0 .1em;padding:.1em .6em;font-family:var(--nc-font-sans);font-size:11px;line-height:var(--s-prose-line-height);color:var(--black-800);text-shadow:0 1px 0 var(--white);background-color:var(--black-075);border:1px solid var(--black-300);border-radius:3px;box-shadow:0 1px 1px rgba(12,13,14,.15),inset 0 1px 0 0 #fff;overflow-wrap:break-word}.top-link{transition:all .25s ease-in-out;position:fixed;bottom:0;left:10;display:inline-flex;cursor:pointer;align-items:center;justify-content:center;margin:0 3em 3em 0;border-radius:50%;padding:.25em;width:40px;height:40px;background-color:var(--nc-bg-2)}.top-link.show{visibility:visible;opacity:1}.top-link.hide{visibility:hidden;opacity:0}.top-link svg{fill:var(--nc-lk-1);width:24px;height:12px}.top-link:hover{background-color:var(--nc-bg-0)}.top-link:hover svg{fill:var(--nc-lk-2)}.screen-reader-text{position:absolute;clip-path:inset(50%);margin:-1px;border:0;padding:0;width:1px;height:1px;overflow:hidden;word-wrap:normal!important;clip:rect(1px,1px,1px,1px)}.screen-reader-text:focus{display:block;top:5px;left:5px;z-index:100000;clip-path:none;background-color:#eee;padding:15px 23px 14px;width:auto;height:auto;text-decoration:none;line-height:normal;color:#444;font-size:1em;clip:auto!important}.disable-scrollbars::-webkit-scrollbar{background:0 0;width:0}.disable-scrollbars{scrollbar-width:none;-ms-overflow-style:none}.pull-right{float:right}.post-subheader{font-style:italic;color:var(--nc-tx-3)}.post-date{font-family:var(--nc-font-mono)}ul.post-list{list-style-type:none;padding-left:0}@media screen and (max-width:600px){.post-date{display:none}ul.post-list{list-style-type:disc;padding-left:0}}.post-date.no-date{display:none}ul.post-list.no-date{list-style-type:disc;padding-left:2rem}</style></head><body><header><h1>The stuff I do</h1><nav class="topnav" id="header-navbar" onclick="navbarToggle()"><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/")' data-goatcounter-click="navbar-Home" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">Home</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/posts/")' data-goatcounter-click="navbar-Posts" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">Posts</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/projects/")' data-goatcounter-click="navbar-Projects" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">Projects</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/apps/")' data-goatcounter-click="navbar-Apps" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">Apps</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/music/")' data-goatcounter-click="navbar-Music" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">Music</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/about/")' data-goatcounter-click="navbar-About" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">About</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/ring/")' data-goatcounter-click="navbar-Ring" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">Ring</a> <i class="nav-separator">♢</i> </span><span class="nav-item"><a class="nav-link" href="#" onclick='navbarNavigate("/feed.xml")' data-goatcounter-click="navbar-RSS" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">RSS</a> <i class="nav-separator">♢</i> </span><span style="cursor:pointer" class="nav-item" onclick="toggleDarkTheme()" data-goatcounter-click="toggle-theme" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">◐</span> <span class="icon hamburger"></span></nav></header><div class="content-container"><h2>Creating my homemade environmental sensors system</h2><p class="post-subheader"><span id="post_date"></span> - 2377 words - <span id="commentCounter"></span> <span id="comment_word"></span></p><p><a href="/posts" data-goatcounter-click="back-to-posts" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">← Posts</a></p><blockquote><p>This article is a work in progress</p></blockquote><h2 id="supporting-software-architecture" tabindex="-1">Supporting software architecture <a class="header-anchor" href="#supporting-software-architecture">🔗</a></h2><p>The first component needed for this system is a logging system which allows me to</p><ul><li>Receive HTTP calls from the sensors</li><li>Store and display applicative logs of these calls for debugging purpose</li><li>Store and display the metrics gathered by the sensors</li></ul><p>To get these features I'm using <a href="https://github.com/statox/api.statox.fr" target="_blank" rel="noopener noreferrer">my API</a> and an Elasticsearch cluster <a href="/posts/2024/04/api_logging_elasticsearch/">that I setup earlier</a>.</p><p>The API has an endpoint dedicated to reporting data from the sensors. The endpoint uses a JSON schema to validate the body of the <code>POST</code> requests it receives and only allows a specific list of fields to be sent. When a valid request is received, the data is sent via a JSON message to logstash with a specific message indicating that the log contains sensor data.</p><p>When logstash received this message, its pipeline detects the specific message and writes the log to a dedicated data stream meant to contain only environmental metrics. I can then use Kibana to create all the visualizations I need to this metric data.</p><p>I cut a few corners to get things working for now, but a few things could be reworked in this system:</p><ul><li>I am currently implementing API key-based authentication to ensure only my sensors can call my API.</li><li>Having my sensors connected to the internet and calling my API directly is not an ideal security situation. Once my system is stable, a future iteration will involve having the sensors call a gateway on their local network, with the gateway responsible for sending the data to my API.</li><li>I probably could leverage the ELK stack's ability to handle metrics and avoid sending logs to logstash. This is a topic I need to dig.</li></ul><h2 id="breadboard-prototyping" tabindex="-1">Breadboard prototyping <a class="header-anchor" href="#breadboard-prototyping">🔗</a></h2><p>I went through several iterations to get a working sensor. The goal was to create a device with the following features:</p><ul><li>Read environmental data from one or several sensors. At a minimum, temperature and humidity, ideally also atmospheric pressure, and maybe as a bonus, luminosity, air quality, precipitation volume, ambient noise level, etc.</li><li>Send this data to a remote server via a Wi-Fi network.</li><li><strong>Safely</strong> operate on battery power.</li></ul><p>For the basis of my devices, I chose to use the <a href="https://learn.adafruit.com/adafruit-feather-huzzah-esp8266" target="_blank" rel="noopener noreferrer">Adafruit Feather HUZZAH ESP8266</a>. I chose it for its ability to connect to a Wi-Fi network without hassle, the several input pins it offers, and its compatibility with the <a href="https://learn.adafruit.com/featherwing-proto-and-doubler" target="_blank" rel="noopener noreferrer">FeatherWing Proto</a>, which allows creating a self-contained device without having to design and print a complete PCB.</p><h3 id="vma320" tabindex="-1">VMA320 <a class="header-anchor" href="#vma320">🔗</a></h3><p>I created my first iterations on a breadboard, and the first sensor I tried was a <a href="https://www.velleman.eu/products/view/?id=435554" target="_blank" rel="noopener noreferrer">VMA320</a>, which I had laying around in my toolkit. The VMA320 returns the current temperature on its data pin with an analog output.</p><pre><code>VMA320

temperature range: -55 °C to 125 °C
accuracy: ± 0.5°C
connection: analog output
</code></pre><p>The analog output of the VMA320 is proportional to the logic voltage we apply to it. Since the ESP8266 has a 3V logic, the output can go up to 3V, but the analog input pin of the ESP8266 can handle only up to 1V. So I needed to create a voltage divider to be able to read the output of the sensor.</p><p>This had two major drawbacks:</p><ul><li>Because of the inaccuracies in my resistor values and the code I used to read from the voltage divider, I was not very confident in the data I got from the sensor.</li><li>The ESP8266 only has one analog input pin, which I knew I would need later on to monitor the battery.</li></ul><p>With this first version I confirmed that I was able to</p><ul><li>Upload code to the ESP8266</li><li>Interface with its pin</li><li>Debug my code when running on the SoC</li></ul><p><img src="./breadboard_vma320.jpg" alt="Breadboard VMA320"/></p><center><i>The early prototype: Breadboard version of ESP8266 reading from a VMA320</i></center><p><img src="./schematics_vma320.jpg" alt="Schematics VMA320"/></p><center><i>The early prototype: Schematics version of ESP8266 reading from a VMA320</i></center><pre class="language-arduino"><code class="language-arduino"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;math.h></span></span>

<span class="token comment">/*
 * Code for the VMA320 temperature sensor
 * https://www.velleman.eu/products/view/?country=be&amp;lang=fr&amp;id=435554
 */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SENSOR_PIN</span> <span class="token expression">A0 </span><span class="token comment">// Input PIN: ADC (The only analogue pin on ESP8266)</span></span>

<span class="token comment">// Based on https://stackoverflow.com/a/44932077/4194289</span>
<span class="token keyword">double</span> <span class="token function">analogToCelsius</span><span class="token punctuation">(</span><span class="token keyword">int</span> RawADC<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">double</span> Temp<span class="token punctuation">;</span>
    Temp <span class="token operator">=</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">10000.0</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1024.0</span><span class="token operator">/</span>RawADC<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// for pull-up configuration</span>
    Temp <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">0.001129148</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0.000234125</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">0.0000000876741</span> <span class="token operator">*</span> Temp <span class="token operator">*</span> Temp <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span> Temp <span class="token punctuation">)</span><span class="token punctuation">;</span>
    Temp <span class="token operator">=</span> Temp <span class="token operator">-</span> <span class="token number">273.15</span><span class="token punctuation">;</span>            <span class="token comment">// Convert Kelvin to Celcius</span>
    <span class="token keyword">return</span> Temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">double</span> <span class="token function">readTempCelsius</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> sensorvalue <span class="token operator">=</span> <span class="token function">analogRead</span><span class="token punctuation">(</span>SENSOR_PIN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">double</span> celsius <span class="token operator">=</span> <span class="token function">analogToCelsius</span><span class="token punctuation">(</span>sensorvalue<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> celsius<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><center><i>The code to read from the VMA320 is awkward</i></center><h3 id="dht11-and-battery-level" tabindex="-1">DHT11 and battery level <a class="header-anchor" href="#dht11-and-battery-level">🔗</a></h3><p>My second iteration replaced the VMA320 with a <a href="https://www.adafruit.com/product/386" target="_blank" rel="noopener noreferrer">DHT11</a> I also had from an earlier attempt at this project. This allowed me to free the ESP8266 analog pin and to benefit from the more accurate sensor.</p><pre><code>DHT11

temperature range: 0 °C to 50 °C
accuracy: ± 2°C

humidity range: 20% to 80%
accuracy: ± 5%

connection: digital output
sampling rate: 0.5Hz to 1Hz (Depending on the sources)
</code></pre><p><img src="./breadboard_dht11.jpg" alt="Breadboard DHT11"/></p><center><i>Early prototype: Breadboard version of ESP8266 reading from a DHT11</i></center><p>To read the sensor's data I used <a href="https://github.com/adafruit/DHT-sensor-library" target="_blank" rel="noopener noreferrer">adafruit's DHT library</a> which allowed me to greatly simplify my code:</p><pre class="language-arduino"><code class="language-arduino"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DHTPIN</span> <span class="token expression"><span class="token number">13</span>      </span><span class="token comment">// Pin used to read the DHT sensor</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DHTTYPE</span> <span class="token expression">DHT11  </span><span class="token comment">// Can be changed for DHT22 sensors</span></span>

<span class="token comment">// Initialize DHT sensor for normal 16mhz Arduino</span>
DHT <span class="token function">dht</span><span class="token punctuation">(</span>DHTPIN<span class="token punctuation">,</span> DHTTYPE<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">initDHT</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dht<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

float<span class="token operator">*</span> <span class="token function">readDHT</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Reading temperature or humidity takes about 250 milliseconds!</span>
    <span class="token comment">// Sensor readings may also be up to 2 seconds 'old' (its a very slow sensor)</span>
    float h <span class="token operator">=</span> dht<span class="token punctuation">.</span><span class="token function">readHumidity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Read temperature as Celsius</span>
    float t <span class="token operator">=</span> dht<span class="token punctuation">.</span><span class="token function">readTemperature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    float<span class="token operator">*</span> result <span class="token operator">=</span> <span class="token keyword">new</span> float<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>
    result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> h<span class="token punctuation">;</span>

    <span class="token comment">// Check if any reads failed</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isnan</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isnan</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">Serial</span><span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Failed to read from DHT sensor!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><p>With this version I also started using a Li-Po battery to power the system. This is the part that I was most worried about because Li-Po batteries tend to be explode pretty impressively when mishandled and I'm not keen on seeing that happening in my house. Using this type of battery requires a basic understanding of how they work to avoid pushing them into unsafe zones.</p><p>The Li-Po voltage is around 4.2V when fully charged. It then decreases to around 3.7V and remains stable at this voltage for a relatively long time. Subsequently, the voltage drops quickly. It is recommended to stop using the battery below 3.3V, and the battery's protection circuitry is designed to shut it down completely at around 2.5V.</p><p>To monitor the battery level, I created a voltage divider to scale the 4.2V voltage down to 1V, which I could then read from the ESP8266 analog pin. As shown in the schematic, I could also use my voltmeter to directly measure the battery's output voltage.</p><p><img src="./schematics_battery_voltage_divider.jpg" alt="Battery voltage divider"/></p><center><i>Voltage divider schematic to read battery level</i></center><p>After adding some code to convert the analog reading into a percentage of charge and send it to the server, I successfully created my first visualization with a graph showing the temperature, humidity, and battery level.</p><p><img src="./first_visualization.jpg" alt="First Kibana Visualization"/></p><center><i>The first Kibana visualization</i></center><p>At this point the main loop of the arduino code was as follow:</p><ul><li>Read from the sensor</li><li>Send the readings to the server</li><li>Use <a href="https://www.arduino.cc/reference/en/language/functions/time/delay/" target="_blank" rel="noopener noreferrer"><code>delay()</code></a> to pause the program for 10 minutes</li><li>Repeat.</li></ul><p>I decided to let the system run for several hours to observe its performance, and it seemed to work well. I got confused by my battery readings and ended up <a href="https://forums.adafruit.com/viewtopic.php?p=1016286" target="_blank" rel="noopener noreferrer">asking for help on the adafruit forum</a>:</p><ul><li>The battery continued operating at voltages much lower than I had expected.<ul><li>I learned that the shutdown voltage of the battery circuitry is not standardized and varies by manufacturer.</li></ul></li><li>Despite the low battery voltage, the ESP8266 continued running.<ul><li>I learned that the board is more efficient than I had realized, and its ability to operate at lower voltages is a feature.</li></ul></li></ul><p>Even though my calculations for the battery percentage were slightly inaccurate, the discharge curve of my battery matched exactly what I had expected based on my research into Li-Po batteries. Therefore, both my voltage divider and raw readings were correct!</p><p><img src="./kibana_battery_overuse.png" alt="Kibana battery overuse"/></p><center><i>Battery tension dropping</i></center><h2 id="from-the-breadboard-to-the-protoboard" tabindex="-1">From the breadboard to the protoboard <a class="header-anchor" href="#from-the-breadboard-to-the-protoboard">🔗</a></h2><p>With my initial tests successful, I decided to transition my sensor setup from the breadboard to a more permanent solution that would be easier to move around the house and manipulate. To achieve this, I mounted the Feather on a mini breadboard and utilized the FeatherWing to establish connections to the sensor and implement the voltage divider for the battery.</p><p><img src="./protoboard_dht22_1.jpg" alt="Protoboard version"/><br/><img src="./protoboard_dht22_2.jpg" alt="Protoboard version"/></p><center><i>Moving the project to a protoboard</i></center><h3 id="dht22" tabindex="-1">DHT22 <a class="header-anchor" href="#dht22">🔗</a></h3><p>At this point, I replaced the DHT11 sensor with a <a href="https://whadda.com/product/cm2302-dht22-temperature-humidity-sensor-module-wpse345/" target="_blank" rel="noopener noreferrer">DHT22 module</a>. The DHT22 is essentially an upgraded version of the DHT11, and the module includes a convenient pull-up resistor.</p><pre><code>DHT22

temperature range: -40 °C to 80 °C
accuracy: ± 0.5°C

humidity range: 0% to 100%
accuracy: ± 2-5%

connection: digital output
sampling rate: 0.5Hz
</code></pre><p>Adafruit has an interesting <a href="https://learn.adafruit.com/dht" target="_blank" rel="noopener noreferrer">comparison page</a>. Switching to the DHT22 was quite convenient: the DHT library functions the same way for both sensors, so it was simply a matter of connecting it to the same pins and changing the <code>DHTTYPE</code> constant in my code.</p><p>I also created a second device identical to the first one and let them run for several days to compare their readings. The following graph shows these readings:</p><ul><li>Between the 22nd and the 26th, the sensors were placed at two opposite corners of the same room.</li><li>Between the 26th and the 30th, they were placed right next to each other.</li><li>After the 30th, they were placed in two different rooms in a fairly small apartment.</li></ul><p><img src="./similar_curves_for_2_sensors.png" alt="Similar curves for two different sensors"/></p><center><i>Similar curves for two different sensors</i></center><p>I am pleased with the results. Although my methodology is not the most scientific, I am fairly confident to say that:</p><ul><li>Since both curves generally follow the same pattern, both sensors have similar reaction times and sensitivity.</li><li>The minimal differences observed when the sensors are next to each other suggest they are calibrated similarly.</li></ul><p>With these results, I'm not certain about the absolute accuracy of the readings (e.g., whether the sensors accurately reflect the current temperature: when they indicate 24°C is it really 24°C or 22°C or 26°C?), but they should be meaningful and sufficient for my goal of understanding how temperature evolves in my apartment.</p><h3 id="bme280" tabindex="-1">BME280 <a class="header-anchor" href="#bme280">🔗</a></h3><p>Another metric I wanted to track in my system is atmospheric pressure. For this, I used <a href="https://whadda.com/product/bme280-temperature-humidity-and-pressure-sensor-wpse335/" target="_blank" rel="noopener noreferrer">a BME280</a> sensor, which I connected to one of my devices that already had a DHT22. This allowed me to have both sensors in the same location and use a single ESP8266 to read from them.</p><p>I opted to use the BME280 in I2C connection mode, requiring only 4 pins to connect to the board: 2 for power supply and 2 for data reading. The I2C connection also means that the sampling rate is essentially as fast as I want now (not that it matters since I am still polling the sensors every 10 minutes).</p><pre><code>BME280

temperature range: -40 °C to 85 °C
accuracy: ± 0.5°C

humidity range: 0% to 100%
accuracy: ± 3%

pressure range: 300hPa to 1100 hPa
accuracy: ± 1hPa

connection: I2C (also support SPI)
sampling rate: -
</code></pre><p><img src="./protoboard_bme280.jpg" alt="Protoboard with BME280"/></p><center><i>Protoboard with BME280</i></center><p>I then compared the readings of the BME280 with those of the two DHT22 sensors to check for calibration issues. The raw values show the BME280 as the pink curve, while the blue and green curves represent the two DHT22 sensors.</p><p><img src="./bme_280_raw_comparison.png" alt="Raw values comparison"/></p><center><i>The BME280 is not calibrated the same way as the DHT22 (left: temperatures, right: humidity)</i></center><p>For the temperature, the BME280 closely follows the trend of the other two sensors but with an offset of about 0.6°C. Regarding humidity, the situation is more complex: there appears to be both an offset and a scaling issue. After adjusting the humidity curve using the formula <code>20 + (0.7 * last_value(document.humidity2, kql='&quot;document.humidity2&quot;: *'))</code>, I obtained the following results:</p><p><img src="./bme_280_corrected_comparison.png" alt="Corrected values comparison"/></p><center><i>However the readings can be transformed to better fit the DHT22 readings (left: temperatures, right: humidity)</i></center><p>Good enough for me! Again, I'm unsure about the absolute calibration of the sensors, but they are consistent with each other, so my measurements should be reliable.</p><p>I also really liked <a href="https://www.kandrsmith.org/RJS/Misc/Hygrometers/absolutetemperature.html" target="_blank" rel="noopener noreferrer">this article</a> by Robert Smith about his process for calibrating thermometers. At some point, I intend to try a similar ice bath experiment.</p><h2 id="adding-an-enclosure" tabindex="-1">Adding an enclosure <a class="header-anchor" href="#adding-an-enclosure">🔗</a></h2><p>Now that I'm confident my sensors work well, I want to enclose them properly. I have two different needs: enclosures for the indoor sensors to tidy up cables and protect them from daily life, and enclosures for the outdoor sensors that need to be weatherproof.</p><h3 id="indoor-enclosure" tabindex="-1">Indoor enclosure <a class="header-anchor" href="#indoor-enclosure">🔗</a></h3><p>For my indoor enclosure I am considering two options:</p><p>Mastering <a href="https://www.mecabricks.com/en/workshop" target="_blank" rel="noopener noreferrer">Mecabricks</a> to design a Lego enclosure and then using the Lego <a href="https://www.lego.com/fr-fr/pick-and-build/pick-a-brick" target="_blank" rel="noopener noreferrer">Pick a Brick</a> to acquire the necessary bricks. However, this option is on hold until I improve my skills with the online tool.</p><p>Using a colleague's 3D printer to print a suitable enclosure. I have started to gather quotes for the project, but this is also on hold for now.</p><p><img src="./sensor_quotes.jpg" alt="Sensor quotes"/></p><center><i>Behold my incredible technical drawing skills!</i></center><h3 id="outdoor-enclosure" tabindex="-1">Outdoor enclosure <a class="header-anchor" href="#outdoor-enclosure">🔗</a></h3><p>This enclosure is more complex because it needs to protect the board and the battery from significant humidity changes while allowing the sensor to be exposed to the environment for accurate readings. I have no experience with this type of project, but I intuition tells me that exposing electronic components and sensitive batteries outdoors requires some caution.</p><p>Therefore, I began by researching and educating myself:</p><ul><li><a href="https://vbn.aau.dk/ws/portalfiles/portal/221557312/2015IMAPS_breathing_effect.pdf" target="_blank" rel="noopener noreferrer">Humidity evolution (breathing effect) in enclosures with electronics</a></li><li><a href="https://www.researchgate.net/profile/Zheng-Guilin/publication/232616036_Modeling_and_Simulation_of_Humidity_Inside_Sealed_Boxes/links/540d5b550cf2f2b29a383bf9/Modeling-and-Simulation-of-Humidity-Inside-Sealed-Boxes.pdf" target="_blank" rel="noopener noreferrer">Modeling and Simulation of Humidity Inside Sealed Boxes</a></li><li><a href="https://www.agmcontainer.com/blog/how-to/engineering-moisture-pressure-protection-guide/" target="_blank" rel="noopener noreferrer">A Guide to Engineering Moisture &amp; Pressure Protection for Sealed Enclosures</a></li><li><a href="https://forum.mysensors.org/topic/1560/how-to-protect-your-outdoor-sensor" target="_blank" rel="noopener noreferrer">forum discussion about sensors protection</a></li></ul><p>These papers are super interesting but I ended up winging it: I bought a small plastic enclosure similar <a href="https://www.adafruit.com/product/903" target="_blank" rel="noopener noreferrer">to this one</a> with a toric joint for waterproofing and a weatherproof cable gland. The idea is to have the sensor outside of the box while the ESP8266 and its battery remain safe in a waterprood box.</p><p><img src="./weatherproof_enclosure.jpg" alt="Weather-proof enclosure"/><br/><img src="./weatherproof_enclosure_with_cable_gland.jpg" alt="Weather-proof enclosure with cable gland"/></p><p>To test this enclosure I used my two DHT22 sensors: One in the box and one not in the box:</p><p><img src="./weatherproof_enclosure_metrics_long.png" alt="Metrics in the weather-proof enclosure"/></p><center><i>Metrics in the weather-proof enclosure</i></center><p>I found that the box doesn't prevent temperature changes (as expected), but it does maintain the humidity level at what it was when sealed. This should be sufficient for my upcoming initial tests of the outdoor sensor.</p><p><a href="/posts" data-goatcounter-click="back-to-posts" data-goatcounter-referrer="/posts/2024/06/environment_sensors/">← Posts</a></p><hr/><p></p><h3>Related posts</h3><p>Posts in the same category: <span class="formatted-tag">[weather]</span></p><ul><li><span class="post-date">Jun 2024</span> <a class="post-link" href="/posts/2024/06/station_meteo_maison/">Capteurs environnementaux maison</a></li></ul><hr/><comments><h3>Comments</h3><a class="add-comment-btn" href="https://github.com/statox/blog-comments/issues/37#new_comment_field" target="_blank" rel="noopener noreferrer"><button>Comment on Github</button></a><br/></comments><script>const reactionEmojis={laugh:"&#x1F600","+1":"&#x1F44D","-1":"&#x1F44E",hooray:"&#x1F389",confused:"&#x1F615",heart:"&#x2665",rocket:"&#x1F680",eyes:"&#x1F440"};function domReady(e){document.addEventListener("DOMContentLoaded",e),"interactive"!==document.readyState&&"complete"!==document.readyState||e()}function countReactions(e){const t={};return e.forEach(e=>{t[e.content]?t[e.content]++:t[e.content]=1}),t}function formatReactions(e){if(!e.length)return"";const n=countReactions(e);return Object.keys(n).reduce((e,t)=>{return e+'<span class="comment-reaction-item">'+(reactionEmojis[t]||`:${t}:`)+"&nbsp"+n[t]+"</span>"},"")}function appendComments(e){const o=document.querySelector("comments");var t=document.getElementById("commentCounter");t&&(t.innerText=e.length||0),e&&e.forEach&&0!==e.length?e.forEach(function(e){var t=formatCommentDate(new Date(e.created_at)),t=`<a href="${e.user.html_url} rel="noopener noreferrer" target="_blank">${e.user.login}</a>`+" on "+`<a href="${e.html_url}" rel="noopener noreferrer" target="_blank">${t}</a>`;let n="";n=(n=(n+='<div class="comment">')+'    <div class="comment-header">'+t+'</div>    <div class="comment-content">')+'        <div class="comment-text">'+e.body_html+"</div>",0<e.reactions.length&&(n+='        <div class="comment-reactions">'+formatReactions(e.reactions)+"</div>"),n+="    </div></div>",o.insertAdjacentHTML("beforeend",n)}):o.insertAdjacentHTML("beforeend","<p>No comments yet.</p>")}async function getComments(e){return(await fetch(`https://api.github.com/repos/statox/blog-comments/issues/${e}/comments`,{method:"GET",mode:"cors",cache:"no-cache",headers:{Accept:"application/vnd.github.v3.html+json"}})).json()}async function getReactions(e){return(await fetch(`https://api.github.com/repos/statox/blog-comments/issues/comments/${e}/reactions`,{method:"GET",mode:"cors",cache:"no-cache",headers:{Accept:"application/vnd.github.squirrel-girl-preview+json"}})).json()}function formatCommentDate(e){return e.getDate()+`/${e.getUTCMonth()+1}/`+e.getFullYear()}function setupCommentsInPage(t){domReady(async()=>{var e=await getComments(t);await Promise.all(e.map(async e=>{e.reactions=await getReactions(e.id)})),appendComments(e)})}function adaptToScreenSize(e){var t=new Date("Tue Jun 18 2024 00:00:00 GMT+0000 (Coordinated Universal Time)");let n=t.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),o="comments";e.matches&&(n=t.toLocaleDateString(void 0,{year:"numeric",month:"numeric",day:"numeric"}),o="💬"),document.getElementById("post_date").textContent=n,document.getElementById("comment_word").textContent=o}setupCommentsInPage(37);var x=window.matchMedia("(max-width: 500px)");adaptToScreenSize(x),x.addListener(adaptToScreenSize)</script><a class="top-link hide" href="" id="js-top"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6"><path d="M12 6H0l6-6z"/></svg> <span class="screen-reader-text">Back to top</span></a><script>const scrollToTopButton=document.getElementById("js-top");let scrollTimer;const scrollFunc=()=>{var o=window.scrollY;scrollToTopButton.className=0<o?"top-link show":"top-link hide",scrollTimer&&clearTimeout(scrollTimer),scrollTimer=setTimeout(()=>{scrollToTopButton.className="top-link hide"},3e3)},scrollToTop=(window.addEventListener("scroll",scrollFunc),()=>{var o=document.documentElement.scrollTop||document.body.scrollTop;0<o&&(window.requestAnimationFrame(scrollToTop),window.scrollTo(0,o-o/2))});scrollToTopButton.onclick=function(o){o.preventDefault(),scrollToTop()}</script></div><script data-goatcounter="https://statoxblog.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css"/><script src="https://kit.fontawesome.com/cc32401bee.js" crossorigin="anonymous"></script></body></html>